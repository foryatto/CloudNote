(function(t){function e(e){for(var a,i,s=e[0],l=e[1],c=e[2],d=0,h=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},o={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0be7":function(t,e,n){"use strict";var a=n("60d4"),o=n.n(a);o.a},"459b":function(t,e,n){"use strict";var a=n("c19c"),o=n.n(a);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("99af"),n("4de4"),n("45fc"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("van-nav-bar",{staticStyle:{background:"#ecf4f3"},attrs:{title:"云笔记"},scopedSlots:t._u([{key:"left",fn:function(){return[n("van-icon",{attrs:{name:"wap-nav",size:"18"}})]},proxy:!0},{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"search",size:"18"},on:{click:t.gotoSearch}})]},proxy:!0}])}),n("router-view"),n("van-tabbar",{attrs:{route:"","active-color":"#ff7e67","inactive-color":"#68b0ab"}},[n("van-tabbar-item",{attrs:{replace:"",to:"/home",icon:"wap-home"}},[t._v(" 笔记 ")]),n("van-tabbar-item",{attrs:{replace:"",to:"/todo",icon:"column"}},[t._v(" 待办 ")]),n("van-tabbar-item",{attrs:{replace:"",to:"/me",icon:"manager"}},[t._v(" 我的 ")])],1)],1)},r=[],i={methods:{gotoSearch:function(){this.$router.push("/search")}}},s=i,l=n("2877"),c=Object(l["a"])(s,o,r,!1,null,null,null),u=c.exports,d=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"home"}},[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{value:t.categoryId,options:t.options},on:{change:t.getNoteByCategory}})],1),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return n("van-cell",{key:t.noteId,attrs:{title:t.title,to:"/viewNote?id="+t.noteId}})})),1)],1)],1)},f=[],p={data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,pageSize:20,pageNum:1,options:[],categoryId:"0"}},computed:{},created:function(){this.getCategories()},methods:{onLoad:function(){var t=this;setTimeout((function(){t.refreshing&&(t.list=[],t.refreshing=!1),t.axios.get("/notes",{params:{},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(e){var n=e.data;t.list=n.data.items})).catch((function(t){console.log(t)})),t.loading=!1,t.finished=!0,t.list.length>=40&&(t.finished=!0)}),100)},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()},getCategories:function(){var t=this;this.axios.get("/categories",{params:{},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(e){var n=e.data;for(var a in t.options=[{text:"全部分类",value:"0"}],n.data.items)t.options.push({text:n.data.items[a].title,value:n.data.items[a].categoryId})})).catch((function(t){console.log(t)}))},getNoteByCategory:function(t){var e=this;this.categoryId=t,"0"==t?this.onLoad():this.axios.get("/notes",{params:{categoryId:this.categoryId},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(t){var n=t.data;e.list=n.data.items})).catch((function(t){console.log(t)}))},viewNote:function(t){console.log(t)}}},g=p,m=(n("8b71"),Object(l["a"])(g,h,f,!1,null,null,null)),v=m.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"todo"},[n("van-dropdown-menu",[n("van-dropdown-item",{attrs:{options:t.options},on:{change:t.getTodoByStatus},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e){return n("van-swipe-cell",{key:e.noteId,scopedSlots:t._u([{key:"left",fn:function(){return[n("van-button",{attrs:{square:"",type:"primary",text:"更新"},on:{click:function(n){return t.updateTodo(e)}}})]},proxy:!0},{key:"right",fn:function(){return[n("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:function(n){return t.deleteTodo(e)}}})]},proxy:!0}],null,!0)},[n("van-cell",{attrs:{border:!1,title:e.title,value:t._f("dateFormat")(e.createdAt)},on:{click:function(n){return t.showDetail(e)}}})],1)})),1)],1),n("van-popup",{staticStyle:{width:"80%",height:"60%"},attrs:{round:""},model:{value:t.showDetailContent,callback:function(e){t.showDetailContent=e},expression:"showDetailContent"}},[n("div",{staticStyle:{width:"80%",height:"80%",margin:"0 5%"}},[n("p",{staticStyle:{color:"grey"}},[t._v("创建时间: "+t._s(t._f("dateFormat")(t.todo.createdAt)))]),n("van-row",{attrs:{justify:"center"}},[n("van-divider",{style:{color:"#68b0ab",borderColor:"#1989fa",padding:"0 16px"}},[t._v(" 待办事项 ")]),n("van-col",{attrs:{span:"24"}},[t._v(t._s(t.todo.content))])],1)],1)])],1)},y=[],x=(n("f0e6"),n("f564")),w={data:function(){return{list:[],loading:!1,finished:!1,refreshing:!1,pageSize:20,pageNum:1,options:[{text:"未完成",value:!1},{text:"已完成",value:!0}],value:!1,todo:{},showDetailContent:!1}},methods:{onLoad:function(){var t=this;setTimeout((function(){t.refreshing&&(t.list=[],t.refreshing=!1),t.axios.get("/plans",{params:{completed:t.value},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(e){var n=e.data;t.list=n.data.items})).catch((function(t){console.log(t)})),t.loading=!1,t.finished=!0,t.list.length>=40&&(t.finished=!0)}),100)},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()},getTodoByStatus:function(t){var e=this;this.value=t,this.list=[],this.axios.get("/plans",{params:{completed:this.value},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(t){var n=t.data;e.list=n.data.items})).catch((function(t){console.log(t)})),console.log(this.list)},deleteTodo:function(t){var e=this,n=[];n.push(t.planId),this.axios.delete("/plans",{params:{ids:n},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(t){var n=t.data;0==n.code?(Object(x["a"])({type:"primary",message:"删除成功",duration:500}),e.onLoad()):Object(x["a"])({type:"warning",message:"删除失败"})})).catch((function(t){console.log(t)}))},updateTodo:function(t){var e=this;this.axios.put("/plan",{completed:!t.completed,planId:t.planId},{headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(t){var n=t.data;0==n.code?(Object(x["a"])({type:"primary",message:"更新成功",duration:500}),e.onLoad()):Object(x["a"])({type:"warning",message:"更新失败"})})).catch((function(t){console.log(t)}))},showDetail:function(t){this.showDetailContent=!0,this.todo=t}}},S=w,I=Object(l["a"])(S,b,y,!1,null,"2bb133c1",null),_=I.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"userinfo"},[n("div",{staticClass:"photo"},[n("van-image",{attrs:{round:"",width:"6rem",height:"6rem",fit:"fill",src:"https://img.yzcdn.cn/vant/cat.jpeg"}})],1),n("van-grid",{attrs:{gutter:10,"column-num":2,clickable:!0}},[n("van-grid-item",{attrs:{icon:"star",text:"个人资料",color:"#68b0ab"}}),n("van-grid-item",{attrs:{icon:"underway",text:"我的选题",color:"#68b0ab"},on:{click:t.showMyTopic}}),n("van-grid-item",{attrs:{icon:"todo-list",text:"提交论文",color:"#68b0ab"}}),n("van-grid-item",{attrs:{icon:"award",text:"最终成绩",color:"#68b0ab"}}),n("van-grid-item",{attrs:{icon:"medal",text:"退出登录",color:"#68b0ab"},on:{click:t.logOut}}),n("van-grid-item",{attrs:{icon:"smile-comment",text:"关于软件",color:"#68b0ab"}})],1)],1)},O=[],j=n("d399"),L={methods:{logOut:function(){localStorage.removeItem("userInfo"),localStorage.removeItem("authKey"),this.$router.push("/login")},showMyTopic:function(){var t=JSON.parse(localStorage.getItem("userInfo"));null==t.topic?Object(j["a"])("当前还未选择题目"):this.$router.push("/topicInfo/"+t.topic.topic_id)}}},A=L,$=(n("0be7"),Object(l["a"])(A,k,O,!1,null,"7bba6bdc",null)),C=$.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("van-sticky",[n("van-nav-bar",{attrs:{title:t.note.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}})],1),n("v-md-editor",{attrs:{value:t.note.content,mode:"preview"}})],1)},z=[],T={data:function(){return{noteId:this.$route.query.id,note:{title:"标题",content:"# 内容"}}},methods:{getNoteDetail:function(){var t=this;this.axios.get("/note",{params:{noteId:this.noteId},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(e){var n=e.data;t.note=n.data})).catch((function(t){console.log(t)}))},goBack:function(){this.$router.push({path:"/"})}},mounted:function(){this.getNoteDetail()}},q=T,K=Object(l["a"])(q,B,z,!1,null,null,null),N=K.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("van-search",{attrs:{shape:"round",placeholder:"请输入搜索关键词"},on:{search:t.onSearch},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("van-row",{attrs:{id:"history_title"}},[n("van-col",{attrs:{span:"10"}},[n("span",[t._v("历史记录")])]),n("van-col",{attrs:{span:"2",offset:"12"}},[n("van-icon",{attrs:{name:"delete"},on:{click:t.clearHistory}})],1)],1),n("div",{attrs:{id:"history"}},[n("van-row",{attrs:{gutter:"20"}},t._l(t.historyList,(function(e){return n("van-col",{key:e,attrs:{span:"12"}},[n("p",{on:{click:function(n){return t.onSearch(e)}}},[t._v(t._s(e))])])})),1)],1)],1)},E=[],M=(n("a434"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),{name:"Search",data:function(){return{value:"",historyList:[]}},created:function(){var t=localStorage.getItem("history");null!=t&&(this.historyList=t.split(","))},methods:{clearHistory:function(){this.historyList=[],localStorage.setItem("history","")},onSearch:function(t){for(var e=0;e<this.historyList.length;e++)if(this.historyList[e]==t){this.historyList.splice(e,1);break}this.historyList.splice(0,0,t),localStorage.setItem("history",this.historyList.toString()),this.$router.push("/searchInfo/"+t)}}}),P=M,R=(n("d676"),Object(l["a"])(P,D,E,!1,null,"572cb744",null)),H=R.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"selection"},[n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return n("van-cell",{key:t.noteId,attrs:{title:t.title,to:"/viewNote?id="+t.noteId}})})),1)],1)],1)},J=[],U={data:function(){return{title:this.$route.params.title,list:[],loading:!1,finished:!1,refreshing:!1}},created:function(){},methods:{onLoad:function(){var t=this;setTimeout((function(){t.refreshing&&(t.list=[],t.refreshing=!1),t.axios.get("/notes",{params:{title:t.title},headers:{Authorization:"Bearer "+localStorage.getItem("authKey")}}).then((function(e){var n=e.data;t.list=n.data.items})).catch((function(t){console.log(t)})),t.loading=!1,t.finished=!0,t.list.length>=40&&(t.finished=!0)}),100)},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()}}},V=U,Y=(n("459b"),Object(l["a"])(V,F,J,!1,null,"717346fb",null)),G=Y.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{"margin-top":"20%"}},[n("van-form",{on:{submit:t.login}},[n("van-field",{attrs:{name:"username",label:"邮箱",placeholder:"邮箱",rules:[{required:!0,message:"请填写邮箱"}]},model:{value:t.userId,callback:function(e){t.userId=e},expression:"userId"}}),n("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("div",{staticStyle:{margin:"16px 0px"}},[n("van-button",{staticStyle:{width:"80%",margin:"0px auto"},attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v(" 登录 ")])],1)],1)],1)])},W=[],X={data:function(){return{userId:"",password:""}},methods:{login:function(){var t=this;this.axios.post("/user/login",{email:this.userId,password:this.password}).then((function(e){t.status=e.data,null!=t.status.data&&(localStorage.setItem("authKey",t.status.data),t.$router.push("/me"))}))}}},Z=X,tt=Object(l["a"])(Z,Q,W,!1,null,"3b774356",null),et=tt.exports;a["default"].use(d["a"]);var nt=[{path:"/",redirect:"/home",meta:{requireAuth:!0}},{path:"/home",name:"Home",component:v,meta:{requireAuth:!0}},{path:"/viewNote",name:"ViewNote",component:N,meta:{requireAuth:!0}},{path:"/me",name:"me",component:C,meta:{requireAuth:!0}},{path:"/todo",name:"todo",component:_,meta:{requireAuth:!0}},{path:"/search",name:"Search",component:H,meta:{requireAuth:!0}},{path:"/searchInfo/:title",name:"SearchInfo",component:G,meta:{requireAuth:!0}},{path:"/login",name:"Login",component:et}],at=new d["a"]({routes:nt}),ot=at,rt=n("2f62");a["default"].use(rt["a"]);var it=new rt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),st=n("a7fe"),lt=n.n(st),ct=n("bc3a"),ut=n.n(ct),dt=n("b970"),ht=(n("157a"),n("ee2d")),ft=n.n(ht),pt=(n("fefe"),n("02c6")),gt=n.n(pt),mt=(n("8966"),n("c197")),vt=n.n(mt),bt=n("19b3"),yt=n.n(bt),xt=(n("fd0f"),n("603a")),wt=n.n(xt),St=(n("fbc4"),n("1487")),It=n.n(St);ft.a.use(gt.a,{Prism:vt.a}),a["default"].use(ft.a),yt.a.use(wt.a,{Hljs:It.a}),a["default"].use(yt.a),a["default"].use(dt["a"]),a["default"].use(x["a"]),a["default"].use(lt.a,ut.a),ut.a.defaults.baseURL="http://127.0.0.1:8888/api/v1",a["default"].config.productionTip=!1,ot.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requireAuth}))&&null==localStorage.getItem("authKey")&&n({path:"/login"}),n()})),a["default"].filter("dateFormat",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Date(t),a=n.getFullYear(),o=n.getMonth()+1,r=n.getDate();if("yyyy-mm-dd"==e.toLowerCase())return"".concat(a,"年").concat(o,"月").concat(r,"日");var i=n.getHours(),s=n.getMinutes();return"".concat(a,"-").concat(o,"-").concat(r," ").concat(i,":").concat(s)})),new a["default"]({router:ot,store:it,render:function(t){return t(u)}}).$mount("#app")},"60d4":function(t,e,n){},"6f92":function(t,e,n){},"88d7":function(t,e,n){},"8b71":function(t,e,n){"use strict";var a=n("88d7"),o=n.n(a);o.a},c19c:function(t,e,n){},d676:function(t,e,n){"use strict";var a=n("6f92"),o=n.n(a);o.a}});
//# sourceMappingURL=app.08e6d664.js.map